<app-section-title icon="fa fa-sign-in" title="Lista de usuarios"></app-section-title>
<div class="row">
    <div class="col text-right mb-3">
        <button class="btn btn-success btn-sm m-0 pull-right" (click)="openModal(registrarUsuario)" [ngbTooltip]="'Nuevo Registro'"><i
        class="fa fa-plus fa-lg"></i></button>

    </div>
</div>
<div class="table-responsive">
    <table class="table">
        <thead>
            <tr>
                <th (click)="sort('numeroEmpleado')" class="text-center">
                    N° de empleado
                </th>
                <th (click)="sort('nombre')" class="text-center">
                    Nombre
                </th>
                <th (click)="sort('tipo')" class="text-center">
                    Área
                </th>
                <th class="text-center" style="min-width: 5rem">Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let item of data | orderBy: key : reverse | filter:filter | paginate: { itemsPerPage: 5, currentPage: p }; let i = index" (click)="setClickedRow(i)" [class.active]="i == selectedRow">
                <td class="text-center">{{item.numeroEmpleado}}</td>
                <td class="text-center">{{item.nombre}}</td>
                <td class="text-center">{{item.area}}</td>
                <td class="text-center">
                    <i class="fa fa-eye" placement="top" ngbTooltip="Consultar Ingreso" (click)="goTo('form-ingreso', item)"></i> &nbsp;
                    <i class="fa fa-male" placement="top" ngbTooltip="Referencias" (click)="goTo('referencias', item)"></i> &nbsp;
                    <i class="fa fa-file-archive-o" placement="top" ngbTooltip="Formatos" (click)="search(formModal2)"></i> &nbsp;
                </td>
            </tr>

            <tr *ngIf="data.length == 0">
                <td colspan="6">{{isLoading ? 'Cargando...' : 'Sin registros...'}}</td>
            </tr>
        </tbody>
    </table>
    <div class="text-center w-100">
        <pagination-controls autoHide="true" responsive="true" previousLabel="" nextLabel="" (pageChange)="switch($event)">
        </pagination-controls>
    </div>
</div>

<ng-template #registrarUsuario let-registroUsuario>
    <div class="modal-body text-center">
        <h3>Registrar usuario</h3>
        <br>
        <form class="form-horizontal" name="form" #f="ngForm">
            <div class="row">
                <div class="col-8">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="N° de empleado" ngbTooltip="N° de empleado" maxlength="10" required>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="CURP" ngbTooltip="CURP" maxlength="16" required>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Nombre" ngbTooltip="Nombre" required>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="N° de seguro social" ngbTooltip="N° de seguro social" maxlength="10" required>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Tipo sanguineo" ngbTooltip="Tipo sanguineo" maxlength="16" required>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Teléfono fijo " ngbTooltip="Teléfono fijo " maxlength="10" required>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Teléfono celular" ngbTooltip="Teléfono celular" maxlength="16" required>
                            </div>
                        </div>


                        <div class="col-sm-6">
                            <div class="form-group">
                                <app-select placeholder="Rol" required ngbTooltip="Rol" [search]="false" [options]="roles" [multiple]="false" [modelo]="rolSelected" aria-required="true" (getModel)="rolSelected = $event; listRoles()"></app-select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <img (click)="openFinder(inputFile, nameImages.anularIzquierdo)" src="assets/img/no_image.png" alt="frente" class="img-thumbnail shadows">
                </div>
            </div>
        </form>
    </div>
</ng-template>