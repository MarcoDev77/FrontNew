<div class="row">
  <div class="col text-right mb-3">
    <button class="btn btn-success m-0 pull-right" (click)="add()" [ngbTooltip]="'Nuevo Registro'"><i
      class="fa fa-plus fa-lg"></i></button>
    <input type="text" class="form-control pull-right mr-2" style="max-width: 12rem" [(ngModel)]="filter"
           placeholder="Buscar">
  </div>
</div>
<div class="table-responsive">
  <table class="table table-bordered w-100">
    <thead>
    <tr>
      <th (click)="sort('nombre')" class="text-center">
          <span *ngIf="key == 'nombre'" class="fa"
                [ngClass]="{'fa-chevron-circle-down':reverse, 'fa-chevron-circle-up':!reverse}"></span>
        Nombre
      </th>
      <th (click)="sort('rol')" class="text-center">
          <span *ngIf="key == 'rol'" class="fa"
                [ngClass]="{'fa-chevron-circle-down': reverse, 'fa-chevron-circle-up': !reverse}"></span>
        Rol asignado
      </th>
      <th (click)="sort('fechaRegistro')" class="text-center">
          <span *ngIf="key == 'fechaRegistro'" class="fa"
                [ngClass]="{'fa-chevron-circle-down':reverse, 'fa-chevron-circle-up':!reverse}"></span>
        Fecha de registro
      </th>
      <th class="text-center" style="min-width: 5rem">Acciones</th>
    </tr>
    </thead>
    <tbody>
    <tr id="table-form" *ngIf="isForm">
      <td class="text-center">
        <input name="nombre" type="text" class="form-control" [(ngModel)]="areaPericial.nombre" placeholder="Nombre"
               #nombre="ngModel" [ngClass]="{ 'is-invalid':  nombre.touched && nombre.invalid }" required>
      </td>
      <td>
        <app-select [options]="roles" ngbTooltip="Rol" [modelo]="areaPericial.role" [multiple]="false" [limite]="5"
                    (getModel)="areaPericial.role = $event"></app-select>
      </td>
      <td class="text-center">
        {{areaPericial.fechaRegistro ? areaPericial.fechaRegistro : (date | date: 'dd/MM/yyyy')}}
      </td>
      <td class="text-center">
        <i class="fa fa-times mr-3" placement="top" ngbTooltip="Cancelar" (click)="cancel()"></i>
        <button class="save"><i class="fa fa-check" placement="top" ngbTooltip="Guardar"
                                (click)="submit(nombre)"></i></button>
      </td>
    </tr>

    <tr id="{{'tr' + i}}"
        *ngFor="let item of data | orderBy: key : reverse | filter:filter | paginate: { itemsPerPage: 5, currentPage: p }; let i = index"
        (click)="setClickedRow(i)" [class.active]="i == selectedRow">
      <td class="text-center">{{item.nombre}}</td>
      <td class="text-center">{{item.roleNombre}}</td>
      <td class="text-center">{{item.fechaRegistro}}</td>
      <td class="text-center">

        <i class="fa fa-pencil" placement="top" ngbTooltip="Modificar" (click)="update('tr' + i , item)"></i>
      </td>
    </tr>

    <tr *ngIf="data.length==0">
      <td colspan="6">Sin registros...</td>
    </tr>
    </tbody>
  </table>
  <div class="text-center w-100">
    <pagination-controls autoHide="true" responsive="true" previousLabel="" nextLabel="" (pageChange)="switch($event)">
    </pagination-controls>
  </div>
</div>
