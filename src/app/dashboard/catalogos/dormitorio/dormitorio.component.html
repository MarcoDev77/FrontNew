<div class="row">
  <div class="col-sm-3 text-center">
    <h5>Dormitorios</h5>
    <h6>{{centroPenitenciario.clave}}</h6>
    <h6>{{centroPenitenciario.nombre}}</h6>
  </div>
  <div class="col-sm-9">
    <hr style="background-color: #CE9ACB; height: 1px">
  </div>
</div>
<br>
<div class="row">
  <div class="col text-right mb-3">
    <button class="btn btn-success btn-sm m-0 pull-right" (click)="add()" [ngbTooltip]="'Nuevo Registro'"><i
      class="fa fa-plus fa-lg"></i></button>
    <input type="text" class="form-control form-control-sm pull-right mr-2" style="max-width: 12rem"
           [(ngModel)]="filter"
           placeholder="Buscar">
  </div>
</div>
<div class="table-responsive">
  <table class="table">
    <thead>
    <tr>
      <th (click)="sort('clave')" class="text-center">
          <span *ngIf="key == 'clave'" class="fa"
                [ngClass]="{'fa-chevron-circle-down':reverse, 'fa-chevron-circle-up':!reverse}"></span>
        Clave
      </th>
      <th (click)="sort('nombre')" class="text-center">
          <span *ngIf="key == 'nombre'" class="fa"
                [ngClass]="{'fa-chevron-circle-down': reverse, 'fa-chevron-circle-up': !reverse}"></span>
        Nombre
      </th>
      <th (click)="sort('capacidadInternos')" class="text-center">
          <span *ngIf="key == 'capacidadInternos'" class="fa"
                [ngClass]="{'fa-chevron-circle-down': reverse, 'fa-chevron-circle-up': !reverse}"></span>
        Capacidad de internos
      </th>
      <th (click)="sort('ubicacion')" class="text-center">
          <span *ngIf="key == 'ubicacion'" class="fa"
                [ngClass]="{'fa-chevron-circle-down': reverse, 'fa-chevron-circle-up': !reverse}"></span>
        Ubicación
      </th>
      <th (click)="sort('temporal')" class="text-center">
          <span *ngIf="key == 'temporal'" class="fa"
                [ngClass]="{'fa-chevron-circle-down': reverse, 'fa-chevron-circle-up': !reverse}"></span>
        Temporal
      </th>
      <th class="text-center" style="min-width: 5rem">Acciones</th>
    </tr>
    </thead>
    <tbody>
    <tr id="table-form" *ngIf="isForm">

      <td class="text-center">
        <input name="clave" type="text" class="form-control" [(ngModel)]="dormitorio.clave" placeholder="Clave"
               #clave="ngModel" [ngClass]="{ 'is-invalid':  clave.touched && clave.invalid }" required>
      </td>

      <td class="text-center">
        <input name="nombre" type="text" class="form-control" [(ngModel)]="dormitorio.nombre" placeholder="Nombre"
               #nombre="ngModel" [ngClass]="{ 'is-invalid':  nombre.touched && nombre.invalid }" required>
      </td>

      <td class="text-center">
        <input name="capacidadInternos" type="number" class="form-control" [(ngModel)]="dormitorio.capacidadInternos" placeholder="Capacidad de internos"
               #capacidadInternos="ngModel" [ngClass]="{ 'is-invalid':  capacidadInternos.touched && capacidadInternos.invalid }" required>
      </td>

      <td class="text-center">
        <input name="ubicacion" type="text" class="form-control" [(ngModel)]="dormitorio.ubicacion" placeholder="Capacidad"
               #ubicacion="ngModel" [ngClass]="{ 'is-invalid':  ubicacion.touched && ubicacion.invalid }" required>
      </td>

      <td class="text-center">
        <input name="temporal" type="checkbox" class="form-control" [(ngModel)]="dormitorio.temporal" placeholder="Ubicación">
      </td>

      <td class="text-center">
        <i class="fa fa-times mr-3" placement="top" ngbTooltip="Cancelar"
           (click)="cancel()"></i>
        <i class="fa fa-check" placement="top" ngbTooltip="Guardar"
           (click)="submit([nombre])"></i>
      </td>

    </tr>

    <tr id="{{'tr' + i}}"
        *ngFor="let item of data | orderBy: key : reverse | filter:filter | paginate: { itemsPerPage: 5, currentPage: p }; let i = index"
        (click)="setClickedRow(i)" [class.active]="i == selectedRow">
      <td class="text-center">{{item.clave}}</td>
      <td class="text-center">{{item.nombre}}</td>
      <td class="text-center">{{item.capacidadInternos}}</td>
      <td class="text-center">{{item.ubicacion}}</td>
      <td class="text-center">{{item.temporal ? 'Sí' : 'No'}}</td>
      <td class="text-center">
        <i class="fa fa-pencil" placement="top" ngbTooltip="Modificar" (click)="update('tr' + i , item)"></i>
        &nbsp;
        <i *ngIf="item.estatus" class="fa fa-toggle-on" (click)="toggleStatus(item)" placement="top"
           ngbTooltip="Deshabilitar"></i>
        <i *ngIf="!item.estatus" class="fa fa-toggle-off" (click)="toggleStatus(item)" placement="top" ngbTooltip="Habilitar"></i>
        &nbsp;
        <!--        <i (click)="delte(item)" placement="top" ngbTooltip="Eliminar" class="fa fa-trash-o"></i>-->
      </td>
    </tr>

    <tr *ngIf="data.length==0">
      <td colspan="6">{{isLoading ? 'Cargando...' : 'Sin registros...'}}</td>
    </tr>
    </tbody>
  </table>
  <div class="text-center w-100">
    <pagination-controls autoHide="true" responsive="true" previousLabel="" nextLabel="" (pageChange)="switch($event)">
    </pagination-controls>
  </div>
</div>
